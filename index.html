<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Simulador Jur√≠dico TJPE - Belizza Ara√∫jo</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #fdf7fa; padding: 20px; text-align: center; color: #444; }
        .container { background: white; max-width: 600px; margin: auto; padding: 30px; border-radius: 18px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        h1 { color: #b76e79; margin-bottom: 5px; }
        .subtitulo { font-size: 0.9em; color: #888; margin-bottom: 20px; }
        label { display: block; margin-top: 15px; text-align: left; font-weight: bold; color: #7a4a52; }
        select, input { width: 100%; padding: 12px; margin-top: 5px; border-radius: 8px; border: 1px solid #ddd; box-sizing: border-box; }
        
        /* Estilo para o Prazo em Dobro */
        .checkbox-container { display: flex; align-items: center; margin-top: 20px; background: #fff5f7; padding: 10px; border-radius: 8px; border: 1px dashed #d88fa0; }
        .checkbox-container input { width: auto; margin-right: 10px; margin-top: 0; cursor: pointer; }
        .checkbox-container label { margin-top: 0; font-size: 0.9em; cursor: pointer; }

        button { width: 100%; padding: 15px; margin-top: 25px; border: none; border-radius: 10px; background: #d88fa0; color: white; font-weight: bold; font-size: 1.1em; cursor: pointer; transition: 0.3s; }
        button:hover { background: #c5768b; }
        .resultado { margin-top: 25px; background: #fff0f4; padding: 20px; border-radius: 10px; text-align: left; border-left: 5px solid #d88fa0; display: none; }
        .alerta { color: #d9534f; font-weight: bold; margin-top: 10px; padding: 10px; background: #f9d6d5; border-radius: 5px; }
        .aviso { margin-top: 30px; font-size: 0.8em; color: #999; line-height: 1.5; }
    </style>
</head>
<body>

<div class="container">
    <h1>üå∏ Simulador de Prazos ‚Äì TJPE</h1>
    <div class="subtitulo">Ferramenta educativa para aux√≠lio na contagem processual.</div>

    <label>√Årea do processo:</label>
    <select id="categoria" onchange="carregarSubcategorias()">
        <option value="">Selecione a √°rea...</option>
        <option value="civil">C√≠vel / Consumidor</option>
        <option value="familia">Fam√≠lia / Alimentos</option>
        <option value="criminal">Criminal</option>
        <option value="violencia">Viol√™ncia Dom√©stica</option>
        <option value="eca">Inf√¢ncia e Juventude (ECA)</option>
    </select>

    <label>Tipo de documento recebido:</label>
    <select id="ato">
        <option value="">Selecione a √°rea primeiro</option>
    </select>
  
    <label>Data da cita√ß√£o/intima√ß√£o:</label>
    <input type="date" id="data">

    <div class="checkbox-container">
        <input type="checkbox" id="prazoDobro">
        <label for="prazoDobro">Sou assistido pela <strong>Defensoria P√∫blica</strong> (Prazo em Dobro)</label>
    </div>

<label style="font-size: 0.85em; margin-top: 10px;">Existe feriado municipal na sua cidade neste m√™s?</label>
        <input type="date" id="feriadoMun">
        <div style="font-size: 0.7em; color: #999; text-align: left;">(Ex: Dia do Padroeiro ou Emancipa√ß√£o)</div>
    </div>
    
    <button onclick="calcular()">Calcular Prazo Final</button>

    <div class="resultado" id="resultado"></div>

    <div class="aviso">
        <strong>Aten√ß√£o:</strong> N√£o inclui os feriados municipais.<br>
        Esta ferramenta √© informativa e baseada no calend√°rio de 2026.<br>
        <strong>Belizza Ara√∫jo ‚Äì Oficiala de Justi√ßa TJPE</strong>
    </div>
</div>

<script>
const prazos = {
    civil: {
        "Resposta inicial (Contesta√ß√£o) - 15 dias": {dias: 15, tipo: "uteis", base: "Art. 335 do CPC"},
        "Recorrer da senten√ßa (Apela√ß√£o) - 15 dias": {dias: 15, tipo: "uteis", base: "Art. 1.003, ¬ß5¬∫ do CPC"},
        "Embargos de Declara√ß√£o - 5 dias": {dias: 5, tipo: "uteis", base: "Art. 1.023 do CPC"},
        "Execu√ß√£o Extrajudicial (Pagamento) - 3 dias": {dias: 3, tipo: "uteis", base: "Art. 829 do CPC"}
    },
    familia: {
        "A√ß√£o de Alimentos (Contesta√ß√£o) - 15 dias": {dias: 15, tipo: "uteis", base: "CPC / Lei 5.478/68"},
        "Execu√ß√£o de Alimentos (Pagamento) - 3 dias": {dias: 3, tipo: "uteis", base: "Art. 528 do CPC"}
    },
    criminal: {
        "Resposta √† Acusa√ß√£o - 10 dias": {dias: 10, tipo: "corridos", base: "Art. 396 do CPP"},
        "Apela√ß√£o Criminal - 5 dias": {dias: 5, tipo: "corridos", base: "Art. 593 do CPP"}
    },
    violencia: {
        "Defesa em Medida Protetiva - 5 dias": {dias: 5, tipo: "corridos", base: "Lei Maria da Penha"}
    },
    eca: {
        "Defesa Pr√©via (Ato Infracional) - 3 dias": {dias: 3, tipo: "corridos", base: "Art. 186, ¬ß3¬∫ do ECA"},
        "Recurso no ECA - 10 dias": {dias: 10, tipo: "corridos", base: "Art. 198 do ECA"}
    }
};

const feriados = [
    "2026-01-01", "2026-02-16", "2026-02-17", "2026-02-18", "2026-03-06", 
    "2026-04-02", "2026-04-03", "2026-04-21", "2026-05-01", "2026-06-22", 
    "2026-06-24", "2026-07-16", "2026-08-10", "2026-09-07", "2026-10-12", 
    "2026-10-30", "2026-11-02", "2026-11-20", "2026-12-08", "2026-12-25"
];

function emRecesso(dataISO) {
    const d = new Date(dataISO + "T00:00:00");
    const juninoInic = new Date("2026-06-23T00:00:00");
    const juninoFim = new Date("2026-06-30T00:00:00");
    const fimAnoInic = new Date("2026-12-20T00:00:00");
    const fimAnoFim = new Date("2027-01-06T00:00:00");
    return (d >= juninoInic && d <= juninoFim) || (d >= fimAnoInic && d <= fimAnoFim);
}

function carregarSubcategorias() {
    const cat = document.getElementById("categoria").value;
    const ato = document.getElementById("ato");
    ato.innerHTML = '<option value="">Selecione o ato...</option>';
    if (!cat) return;
    for (let item in prazos[cat]) {
        let opt = document.createElement("option");
        opt.value = item; opt.text = item; ato.appendChild(opt);
    }
}

function calcular() {
    const cat = document.getElementById("categoria").value;
    const atoSel = document.getElementById("ato").value;
    const dataInicial = document.getElementById("data").value;
    const isDobro = document.getElementById("prazoDobro").checked;

    if (!cat || !atoSel || !dataInicial) {
        alert("Preencha todos os campos."); return;
    }

    const info = prazos[cat][atoSel];
    let qtdDias = isDobro ? info.dias * 2 : info.dias;
    let dataFinal = new Date(dataInicial + "T00:00:00");
    
    if (info.tipo === "uteis") {
        let cont = 0;
        while (cont < qtdDias) {
            dataFinal.setDate(dataFinal.getDate() + 1);
            let iso = dataFinal.toISOString().split('T')[0];
            if (dataFinal.getDay() !== 0 && dataFinal.getDay() !== 6 && !feriados.includes(iso) && !emRecesso(iso)) {
                cont++;
            }
        }
    } else {
        dataFinal.setDate(dataFinal.getDate() + qtdDias);
    }

    const resDiv = document.getElementById("resultado");
    const hoje = new Date(); hoje.setHours(0,0,0,0);
    resDiv.style.display = "block";
    resDiv.innerHTML = `
        <strong>üìÖ Prazo Final: ${dataFinal.toLocaleDateString('pt-BR')}</strong>
        ${dataFinal < hoje ? '<div class="alerta">‚ö†Ô∏è Prazo possivelmente vencido!</div>' : ''}
        <p style="margin-top:10px; font-size:0.85em;">
            <strong>Contagem:</strong> ${qtdDias} ${info.tipo === "uteis" ? "dias √∫teis" : "dias corridos"} ${isDobro ? "(Dobro aplicado)" : ""}<br>
            <strong>Base:</strong> ${info.base}
        </p>
    `;
}
let resumoParaWhats = "";

function calcular() {
    const cat = document.getElementById("categoria").value;
    const atoSel = document.getElementById("ato").value;
    const dataInic = document.getElementById("data").value;
    const fMun = document.getElementById("feriadoMun").value;
    const isDobro = document.getElementById("prazoDobro").checked;

    if (!cat || !atoSel || !dataInic) { alert("Preencha os campos obrigat√≥rios."); return; }

    const info = prazos[cat][atoSel];
    let qtdDias = isDobro ? info.dias * 2 : info.dias;
    let dataFinal = new Date(dataInic + "T00:00:00");
    
    let diasContados = 0;
    while (diasContados < qtdDias) {
        dataFinal.setDate(dataFinal.getDate() + 1);
        let iso = dataFinal.toISOString().split('T')[0];
        
        if (info.tipo === "uteis") {
            const isFimSemana = (dataFinal.getDay() === 0 || dataFinal.getDay() === 6);
            const isFeriado = feriadosEstaduais.includes(iso) || (fMun === iso);
            const isRecesso = emRecesso(iso);
            if (!isFimSemana && !isFeriado && !isRecesso) diasContados++;
        } else {
            diasContados++;
        }
    }

    const res = document.getElementById("resultado");
    const btnW = document.getElementById("btnWhatsapp");
    const dataFinalFormatada = dataFinal.toLocaleDateString('pt-BR');
    
    res.style.display = "block";
    btnW.style.display = "block";
    
    res.innerHTML = `<strong>üìÖ Seu prazo termina em: ${dataFinalFormatada}</strong><br>
    <small>Contagem: ${qtdDias} ${info.tipo === "uteis" ? "dias √∫teis" : "dias corridos"}.</small>`;
    
    resumoParaWhats = `Ol√°! Recebi um mandado judicial e calculei o meu prazo no simulador da Oficiala Belizza Ara√∫jo. %0A%0A*Resumo do meu prazo:*%0Aüìå *Ato:* ${atoSel}%0AüìÖ *Recebido em:* ${new Date(dataInic + "T00:00:00").toLocaleDateString('pt-BR')}%0A‚öñÔ∏è *Prazo final estimado:* ${dataFinalFormatada}%0A%0APreciso de orienta√ß√£o jur√≠dica.`;
}

function enviarWhatsapp() {
    window.open(`https://api.whatsapp.com/send?text=${resumoParaWhats}`, '_blank');
}
</script>
</body>
</html>

